{
	"info": {
		"_postman_id": "2871df7e-b539-4913-bfac-5112214db1cc",
		"name": "Brain-Agriculture-API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "23855247"
	},
	"item": [
		{
			"name": "producer",
			"item": [
				{
					"name": "GetProducers",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/producer/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"producer",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "GetProducersTotalArea",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/producer/1/total-area",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"producer",
								"1",
								"total-area"
							]
						}
					},
					"response": []
				},
				{
					"name": "InsertProducer",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"cpfCnpj\": \"123456\",\n    \"name\": \"José da Silva\",\n    \"phone\": \"96543-6548\",\n    \"personType\": \"FISICA\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/producer/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"producer",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "UpdateProducer",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"cpfCnpj\": \"123456\",\n    \"name\": \"José da Silva Novo\",\n    \"phone\": \"96543-6548\",\n    \"personType\": \"FISICA\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/producer/4",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"producer",
								"4"
							]
						}
					},
					"response": []
				},
				{
					"name": "DeleteProducer",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/producer/4",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"producer",
								"4"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "farm",
			"item": [
				{
					"name": "GetFarm",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/farm/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"farm",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "InsertFarm",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"producer_id\": \"5\",\n    \"city\": \"Joinville\",\n    \"state\": \"Santa Catarina\",\n    \"totalArea\": 10000,\n    \"productiveArea\": 5000,\n    \"nonProductiveArea\": 20000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/farm/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"farm",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "UpdateFarm",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\n        \"totalArea\": \"12000.00\",\n        \"productiveArea\": \"6000.00\",\n        \"nonProductiveArea\": \"3000.00\"\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/farm/2",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"farm",
								"2"
							]
						}
					},
					"response": []
				},
				{
					"name": "DeleteFarm",
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\n        \"totalArea\": \"12000.00\",\n        \"productiveArea\": \"6000.00\",\n        \"nonProductiveArea\": \"3000.00\"\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/farm/2",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"farm",
								"2"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "crop",
			"item": [
				{
					"name": "GetCrop",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"farm_id\": \"2\",\n    \"year\": 2025,\n    \"crop\": \"corn\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/crop/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"crop",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "InsertCrop",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"farm_id\": \"2\",\n    \"year\": 2025,\n    \"crop\": \"corn\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/crop/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"crop",
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "dashboard",
			"item": [
				{
					"name": "getDashboard",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3000/dashboard/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"dashboard",
								""
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					"// Collection-level tests for Brain-Agriculture-API",
					"// These tests run for every request in the collection",
					"",
					"// Test 1: Response time check",
					"pm.test(\"Response time is acceptable (less than 2000ms)\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(2000);",
					"});",
					"",
					"// Test 2: Status code validation",
					"pm.test(\"Status code is valid\", function () {",
					"    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204, 400, 401, 403, 404, 422, 500]);",
					"});",
					"",
					"// Test 3: Content-Type header validation",
					"pm.test(\"Content-Type header is present\", function () {",
					"    pm.response.to.have.header(\"Content-Type\");",
					"});",
					"",
					"// Test 4: Response body exists for non-204 responses",
					"if (pm.response.code !== 204) {",
					"    pm.test(\"Response body is not empty\", function () {",
					"        pm.expect(pm.response.text()).to.not.be.empty;",
					"    });",
					"}",
					"",
					"// Test 5: JSON response validation for successful requests",
					"if (pm.response.code >= 200 && pm.response.code < 300) {",
					"    pm.test(\"Response is valid JSON for successful requests\", function () {",
					"        pm.expect(() => pm.response.json()).to.not.throw();",
					"    });",
					"}",
					"",
					"// Test 6: Error response structure validation",
					"if (pm.response.code >= 400) {",
					"    pm.test(\"Error response has proper structure\", function () {",
					"        const jsonData = pm.response.json();",
					"        // Check for common error properties",
					"        const hasErrorInfo = jsonData.error || jsonData.message || jsonData.errors;",
					"        pm.expect(hasErrorInfo).to.exist;",
					"    });",
					"}",
					"",
					"// Test 7: Request-specific validations based on method and endpoint",
					"const requestName = pm.info.requestName;",
					"const requestMethod = pm.request.method;",
					"",
					"// GetProducers specific tests",
					"if (requestName === \"GetProducers\" && pm.response.code === 200) {",
					"    pm.test(\"[GetProducers] Response is an array\", function () {",
					"        const jsonData = pm.response.json();",
					"        pm.expect(jsonData).to.be.an('array');",
					"    });",
					"    ",
					"    pm.test(\"[GetProducers] Each producer has required fields\", function () {",
					"        const jsonData = pm.response.json();",
					"        if (jsonData.length > 0) {",
					"            jsonData.forEach((producer, index) => {",
					"                pm.expect(producer, `Producer at index ${index} should have an id`).to.have.property('id');",
					"                pm.expect(producer, `Producer at index ${index} should have a name`).to.have.property('name');",
					"            });",
					"        }",
					"    });",
					"    ",
					"    pm.test(\"[GetProducers] Producer IDs are valid\", function () {",
					"        const jsonData = pm.response.json();",
					"        if (jsonData.length > 0) {",
					"            jsonData.forEach((producer, index) => {",
					"                pm.expect(producer.id, `Producer ID at index ${index} should be a number or string`).to.satisfy(",
					"                    id => typeof id === 'number' || typeof id === 'string'",
					"                );",
					"            });",
					"        }",
					"    });",
					"    ",
					"    pm.test(\"[GetProducers] Content-Type is application/json\", function () {",
					"        pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
					"    });",
					"}",
					"",
					"// GetFarm specific tests",
					"if (requestName === \"GetFarm\" && pm.response.code === 200) {",
					"    pm.test(\"[GetFarm] Response is an array\", function () {",
					"        const jsonData = pm.response.json();",
					"        pm.expect(jsonData).to.be.an('array');",
					"    });",
					"    ",
					"    pm.test(\"[GetFarm] Each farm has required fields\", function () {",
					"        const jsonData = pm.response.json();",
					"        if (jsonData.length > 0) {",
					"            jsonData.forEach((farm, index) => {",
					"                pm.expect(farm, `Farm at index ${index} should have an id`).to.have.property('id');",
					"                pm.expect(farm, `Farm at index ${index} should have a city`).to.have.property('city');",
					"            });",
					"        }",
					"    });",
					"    ",
					"    pm.test(\"[GetFarm] Farm area fields are valid numbers if present\", function () {",
					"        const jsonData = pm.response.json();",
					"        if (jsonData.length > 0) {",
					"            jsonData.forEach((farm, index) => {",
					"                if (farm.totalArea !== undefined) {",
					"                    pm.expect(farm.totalArea, `Farm totalArea at index ${index} should be a number`).to.be.a('number');",
					"                    pm.expect(farm.totalArea, `Farm totalArea at index ${index} should be positive`).to.be.at.least(0);",
					"                }",
					"                if (farm.agriculturalArea !== undefined) {",
					"                    pm.expect(farm.agriculturalArea, `Farm agriculturalArea at index ${index} should be a number`).to.be.a('number');",
					"                    pm.expect(farm.agriculturalArea, `Farm agriculturalArea at index ${index} should be positive`).to.be.at.least(0);",
					"                }",
					"                if (farm.vegetationArea !== undefined) {",
					"                    pm.expect(farm.vegetationArea, `Farm vegetationArea at index ${index} should be a number`).to.be.a('number');",
					"                    pm.expect(farm.vegetationArea, `Farm vegetationArea at index ${index} should be positive`).to.be.at.least(0);",
					"                }",
					"            });",
					"        }",
					"    });",
					"    ",
					"    pm.test(\"[GetFarm] Agricultural and vegetation areas don't exceed total area\", function () {",
					"        const jsonData = pm.response.json();",
					"        if (jsonData.length > 0) {",
					"            jsonData.forEach((farm, index) => {",
					"                if (farm.totalArea && farm.agriculturalArea && farm.vegetationArea) {",
					"                    const sumAreas = farm.agriculturalArea + farm.vegetationArea;",
					"                    pm.expect(sumAreas, `Sum of areas at index ${index} should not exceed total area`).to.be.at.most(farm.totalArea);",
					"                }",
					"            });",
					"        }",
					"    });",
					"    ",
					"    pm.test(\"[GetFarm] Content-Type is application/json\", function () {",
					"        pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
					"    });",
					"}",
					"",
					"// InsertCrop specific tests",
					"if (requestName === \"InsertCrop\") {",
					"    if (pm.response.code === 201 || pm.response.code === 200) {",
					"        pm.test(\"[InsertCrop] Crop created successfully\", function () {",
					"            pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
					"        });",
					"        ",
					"        pm.test(\"[InsertCrop] Response contains created crop data\", function () {",
					"            const jsonData = pm.response.json();",
					"            pm.expect(jsonData).to.be.an('object');",
					"            pm.expect(jsonData).to.have.property('id');",
					"        });",
					"        ",
					"        pm.test(\"[InsertCrop] Created crop has valid ID\", function () {",
					"            const jsonData = pm.response.json();",
					"            pm.expect(jsonData.id).to.satisfy(",
					"                id => typeof id === 'number' || typeof id === 'string'",
					"            );",
					"        });",
					"        ",
					"        pm.test(\"[InsertCrop] Content-Type is application/json\", function () {",
					"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
					"        });",
					"    }",
					"    ",
					"    if (pm.response.code === 400 || pm.response.code === 422) {",
					"        pm.test(\"[InsertCrop] Validation error has proper message\", function () {",
					"            const jsonData = pm.response.json();",
					"            const hasErrorMessage = jsonData.error || jsonData.message || jsonData.errors;",
					"            pm.expect(hasErrorMessage).to.exist;",
					"        });",
					"    }",
					"}",
					"",
					"// Test 8: Security headers check (optional but recommended)",
					"pm.test(\"Security: No sensitive data in response headers\", function () {",
					"    const headers = pm.response.headers;",
					"    const sensitiveHeaders = ['x-powered-by', 'server'];",
					"    ",
					"    // This is a soft check - we just log if sensitive headers are present",
					"    sensitiveHeaders.forEach(header => {",
					"        if (headers.has(header)) {",
					"            console.log(`Warning: Sensitive header '${header}' is exposed with value: ${headers.get(header)}`);",
					"        }",
					"    });",
					"    ",
					"    // Always pass this test, it's just informational",
					"    pm.expect(true).to.be.true;",
					"});",
					"",
					"// Test 9: Response consistency check",
					"pm.test(\"Response structure is consistent\", function () {",
					"    if (pm.response.code >= 200 && pm.response.code < 300) {",
					"        const contentType = pm.response.headers.get(\"Content-Type\");",
					"        if (contentType && contentType.includes(\"application/json\")) {",
					"            pm.expect(() => pm.response.json()).to.not.throw();",
					"        }",
					"    }",
					"});",
					"",
					"console.log(`✓ Completed tests for: ${requestName} (${requestMethod})`);"
				]
			}
		}
	]
}